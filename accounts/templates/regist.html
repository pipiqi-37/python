{% extends "base.html" %}
{% block title %}
    <title>手机注册</title>
{% endblock %}

{% block centent %}
    <!--主体-->
    <header class="wy-header">
      <div class="wy-header-icon-back pipiqi"><span>
      </span></div>

      <div class="wy-header-title">手机注册</div>
    </header>
    <form class="weui-content" method="post" action=".">
      <div class="weui-cells weui-cells_form wy-address-edit">
        <div class="weui-cell weui-cell_vcode">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">手机号</label>
          </div>
          <div class="weui-cell__bd">
            <input class="weui-input" type="tel" name="username" placeholder="请输入手机号" />
          </div>
{#          <div class="weui-cell__ft">#}
{#            <button class="weui-vcode-btn">获取验证码</button>#}
{#          </div>#}
        </div>
          {{ form.username.errors }}
        <div class="weui-cell weui-cell_vcode">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">验证码</label>
          </div>
          <div class="weui-cell__bd">
            <input
              class="weui-input"
              type="text"
              name="verify_code"
              placeholder="请输入验证码"
            />
          </div>
          <div class="weui-cell__ft">
            <img class="weui-vcode-img" src="{% url 'system:verify_code' %}" />
          </div>
        </div>
        {{ form.verify_code.errors }}
        <div class="weui-cell">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">设置密码</label>
          </div>
          <div class="weui-cell__bd">
            <input
              class="weui-input"
              type="password"
              name="password"
{#              pattern="[0-9]*"#}
              placeholder="请输入新密码"
            />
          </div>
        </div>
          {{ form.password.errors }}
        <div class="weui-cell">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">确认密码</label>
          </div>
          <div class="weui-cell__bd">
            <input
              class="weui-input"
              type="password"
              name="password_valid"
{#              pattern="[0-9]*"#}
              placeholder="请再次输入新密码"
            />
          </div>
        </div>
          {{ form.password_valid.errors }}
      </div>
      <label for="weuiAgree" class="weui-agree">
        <input
          id="weuiAgree"
          type="checkbox"
          class="weui-agree__checkbox"
          checked="checked"
        />
        <span class="weui-agree__text"
          >阅读并同意<a href="javascript:void(0);">《注册协议》</a></span
        >
      </label>
      <div class="weui-btn-area">
          <button class="weui-btn weui-btn_warn" type="submit">注册并登录</button>
{#        <a href="javascript:;" class="weui-btn weui-btn_warn">注册并登陆</a>#}
      </div>
      <div class="weui-cells__tips t-c font-12">登陆账号为您输入的手机号码</div>
    </form>
   {% endblock %}
{% block foot %}
    <script>
        $('.weui-vcode-img').click(function () {
            let url = $(this).attr("src")
            url = url.split("?")
            $(this).attr("src", url[0] + "?" + new Date().getTime())
        });
        $('.pipiqi').click(function () {
            window.location.href="{% url 'accounts:user_login' %}"
        })
    </script>
{% endblock %}
